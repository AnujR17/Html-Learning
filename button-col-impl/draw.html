<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drawing Board</title>
    <link rel="icon" href="./Group1.png" type="image/x-icon" />
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow-x: hidden;
            line-height: 1.6;
            padding: 0;
            background-color: #f3f3f3; 
            color: #333; 
        }

        /* Navigation Bar */
        .navbar {
            background-color: #4a90e2; 
            padding: 15px;
            text-align: center;
        }

        .nav-items {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .nav-items li {
            display: inline;
            margin: 0 15px;
        }

        .nav-items a {
            color: #fff;
            text-decoration: none;
            font-weight: bold;
        }

        .nav-items a:hover {
            color: #f5c500; 
        }

        /* Sidebar Toggle Button */
        .sidebar-toggle {
            position: absolute;
            top: -3px;
            left: 15px;
            background-color: #4a90e2; 
            color: #fff;
            padding: 10px;
            cursor: pointer;
            z-index: 1000;
            border-radius: 5px;
        }

        .sidebar-toggle span {
            font-size: 24px;
        }

        /* Side Navigation */
        .side-nav {
            position: fixed;
            top: 56px;
            left: -250px;
            width: 250px;
            background-color: #e1e1e1;
            padding-top: 20px;
            height: 100%;
            transition: left 0.3s ease;
            z-index: 999;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .side-nav.open {
            left: 0;
        }

        .side-nav ul {
            list-style-type: none;
            padding: 0;
        }

        .side-nav ul li a {
            color: #333;
            padding: 10px;
            text-decoration: none;
            display: block;
            padding-left: 30px;
        }

        .side-nav ul li a:hover {
            background-color: #4a90e2; 
            color: #fff;
        }

        #topTools {
            width: 100%;
            background-color: #fff;
            color: #333;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            padding: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border-bottom: 1px solid #ddd;
        }

        .corrections button, .tool-group button {
            display: flex;
            align-items: center;
            background-color: #4CAF50;
            border: none;
            color: white;
            padding: 10px;
            text-align: center;
            text-decoration: none;
            font-size: 16px;
            margin: 4px 2px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            border-radius: 4px;
        }
        .corrections {
            display: flex;
            align-items: center;
            margin-right: 24px;
        }

        .corrections button svg, .tool-group button svg {
            margin-right: 8px;
            vertical-align: middle;
            width: 20px;
            height: 20px;
        }

        .corrections button:hover, .tool-group button:hover {
            background-color: #45a049;
        }

        .tool-group {
            margin: 0 10px;
            display: flex;
            align-items: center;
        }

        .tool-group label {
            margin-right: 10px;
            display: flex;
            align-items: center;
            margin-left: 10px;
        }

        .tool-group input[type="color"] {
            padding: 0;
            border: none;
            width: 40px;
            height: 30px;
            cursor: pointer;
            border-radius: 4px;
            margin-left: 5px;
        }

        .tool-group input[type="range"] {
            margin: 0 10px;
            width: 120px;
        }

        .color-box {
            display: flex;
            align-items: center;
        }

        .color-box label {
            margin-right: 10px;
        }

        h1 {
            margin-top: 10px;
            font-size: 24px;
            text-align: center;
        }

        .buttons {
            display: flex;
            justify-content: center;
            width: 100%;
            margin-top: 10px;
        }

        .buttons button {
            display: flex;
            align-items: center;
            margin: 0 10px;
            background-color: #4CAF50;
            border: none;
            color: white;
            padding: 10px;
            text-align: center;
            text-decoration: none;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            border-radius: 4px;
        }

        .buttons button svg {
            margin-right: 8px;
            vertical-align: middle;
            width: 20px;
            height: 20px;
        }

        .buttons button:hover {
            background-color: #45a049;
        }
        .disabled {
            opacity: 0.5;
            pointer-events: none;
        }   

        #drawingCanvas {
            border: 1px solid #ddd;
            background-color: #fff;
            display: block;
            margin: 10px auto;
            cursor: crosshair;
        }
        .footer {
            background: #1a3758; 
            color: #ffffff;
            text-align: center;
            padding: 20px 0;
            border-top: 1px solid #4a90e2; 
            margin-top: 40px;
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <ul class="nav-items">
            <li><a href="index.html">Home</a></li>
            <li><a href="./about-us.html">About Me</a></li>
            <li><a href="index.html#projects">Projects</a></li>
            <li><a href="contact.html">Contact</a></li>
        </ul>
    </nav>
    <div class="sidebar-toggle" id="sidebarToggle">
        <span>&#9776;</span> <!-- Hamburger Icon -->
    </div>

    <!-- Side Navigation for HTML Tags -->
    <aside class="side-nav" id="sideNav">
        <ul>
            <li><a href="anchor.html">Anchor Tag</a></li>
            <li><a href="abbr.html">Abbreviations</a></li>
            <li><a href="area-map.html">Area</a></li>
            <li><a href="misc.html">BDO-BDI</a></li>
            <li><a href="table.html">Col</a></li>
            <li><a href="d-tags.html">D-tags</a></li>
            <li><a href="div.html">Div</a></li>
            <li><a href="signup.html">Form</a></li>
            <li><a href="e-f-tags.html">Embed-iframe-Header</a></li>
            <li><a href="k-o.html">Link-Map-Ol</a></li>
            <li><a href="p-x.html">P-X-Tags</a></li>
        </ul>
    </aside>

<div id="topTools">
    <div class="corrections">
        <button id="undo" title="Undo">
            <img src="./asset/undo-left-round-svgrepo-com.svg" alt="Undo" width="24" height="24">
            Undo
        </button>
        <button id="redo" title="Redo">
            <img src="./asset/undo-right-round-svgrepo-com.svg" alt="Redo" width="24" height="24">
            Redo
        </button>
    </div>

    <div class="tool-group">
        <button id="brushButton" title="Brush Tool">
            <img src="./asset/paintbrush-svgrepo-com.svg" alt="Brush" width="24" height="24">
            Brush
        </button>
        <label for="brushSize">Size:</label>
        <input type="range" id="brushSize" name="brushSize" min="1" max="20" value="5">
    </div>
    <div class="tool-group">
        <button id="eraserButton" title="Eraser Tool">
            <img src="./asset/rubber-svgrepo-com.svg" alt="Eraser" width="24" height="24">
            Eraser
        </button>
        <label for="eraserSize">Size:</label>
        <input type="range" id="eraserSize" name="eraserSize" min="1" max="20" value="10">
    </div>
    <div class="tool-group color-box">
        <label for="brushColor">
            <img src="./asset/color-picker-svgrepo-com.svg" alt="Brush Color" width="24" height="24">
            Brush Color:
        </label>
        <input type="color" id="brushColor" name="brushColor" value="#000000">
    </div>
    <div class="tool-group color-box">
        <label for="canvasBgColor">
            <img src="./asset/background-color-svgrepo-com.svg" alt="Canvas Background" width="24" height="24">
            Canvas Background:
        </label>
        <input type="color" id="canvasBgColor" name="canvasBgColor" value="#ffffff">
    </div>
    <div class="tool-group">
        <button id="uploadImage" title="Upload Image">
            <img src="./asset/upload-svgrepo-com.svg" alt="Upload" width="24" height="24">
            Upload Image
        </button>
        <input type="file" id="uploadImageFile" accept="image/*" style="display: none;">
    </div>
</div>

<h1>Drawing Board</h1>

<canvas id="drawingCanvas"></canvas>

<div class="buttons">
    <button id="downloadCanvas" title="Download Canvas Drawing">
        <img src="./asset/download-svgrepo-com.svg" alt="Download" width="24" height="24">
        Download
    </button>
    <button id="clearCanvas" title="Clear Canvas Drawing">
        <img src="./asset/clear-svgrepo-com.svg" alt="Clear" width="24" height="24">
        Clear
    </button>
</div>
<footer class="footer">
    <p>&copy; 2024 Anuj Rai. Image rights to their respective owners</p>
</footer>
<script>
    const canvas = document.getElementById("drawingCanvas");
    const ctx = canvas.getContext("2d");
    let painting = false;
    let brushSize = document.getElementById("brushSize").value;
    let brushColor = document.getElementById("brushColor").value;
    let canvasBgColor = "#ffffff";
    let canvasBgImage = null;
    const undoStack = [];
    const redoStack = [];
    const drawingStack = [];
    let eraserSize = document.getElementById("eraserSize").value;
    let eraserMode = false;
    let currentOperation = null;

    function adjustCanvasSize() {
        const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
        canvas.width = window.innerWidth * 0.6;
        canvas.height = window.innerHeight * 0.6;
        ctx.putImageData(imageData, 0, 0);
        redrawCanvas();
    }

    window.addEventListener('resize', adjustCanvasSize);
    adjustCanvasSize();

    function startPosition(e) {
        painting = true;
        draw(e);
    }

    function endPosition() {
        painting = false;
        ctx.beginPath();
        if (currentOperation) {
            drawingStack.push(currentOperation);
            addToUndoStack();
            currentOperation = null;
        }
        redoStack.length = 0; 
        updateUndoRedoButtons();
    }

    function draw(e) {
        if (!painting) return;
        ctx.lineWidth = eraserMode ? eraserSize : brushSize;
        ctx.lineCap = "round";
        ctx.strokeStyle = eraserMode ? canvasBgColor : brushColor;

        ctx.lineTo(e.clientX - canvas.offsetLeft, e.clientY - canvas.offsetTop);
        ctx.stroke();
        ctx.beginPath();
        ctx.moveTo(e.clientX - canvas.offsetLeft, e.clientY - canvas.offsetTop);

        if (!currentOperation) {
            currentOperation = {
                tool: eraserMode ? "eraser" : "brush",
                color: brushColor,
                size: eraserMode ? eraserSize : brushSize,
                path: []
            };
        }

        currentOperation.path.push({
            x: e.clientX - canvas.offsetLeft,
            y: e.clientY - canvas.offsetTop
        });
    }

    function redrawCanvas() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        if (canvasBgImage) {
            const img = new Image();
            img.src = canvasBgImage;
            img.onload = () => {
                ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
                drawStack();
            }
        } else {
            ctx.fillStyle = canvasBgColor;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            drawStack();
        }
    }

    function drawStack() {
        for (let operation of drawingStack) {
            ctx.beginPath();
            ctx.lineWidth = operation.size;
            ctx.lineCap = "round";
            ctx.strokeStyle = operation.tool === "eraser" ? canvasBgColor : operation.color;

            for (let point of operation.path) {
                ctx.lineTo(point.x, point.y);
                ctx.stroke();
                ctx.beginPath();
                ctx.moveTo(point.x, point.y);
            }
            ctx.beginPath();
        }
    }

    function addToUndoStack() {
        undoStack.push({
            drawingStack: JSON.parse(JSON.stringify(drawingStack)),
            canvasBgColor: canvasBgColor,
            canvasBgImage: canvasBgImage
        });
        updateUndoRedoButtons();
    }

    function updateUndoRedoButtons() {
        document.getElementById("undo").disabled = undoStack.length === 0;
        document.getElementById("redo").disabled = redoStack.length === 0;
        document.getElementById("undo").classList.toggle('disabled', undoStack.length === 0);
        document.getElementById("redo").classList.toggle('disabled', redoStack.length === 0);
    }

    document.getElementById("brushButton").addEventListener("click", () => {
        eraserMode = false;
    });

    document.getElementById("eraserButton").addEventListener("click", () => {
        eraserMode = true;
    });

    document.getElementById("brushSize").addEventListener("input", (e) => {
        brushSize = e.target.value;
    });

    document.getElementById("eraserSize").addEventListener("input", (e) => {
        eraserSize = e.target.value;
    });

    document.getElementById("brushColor").addEventListener("input", (e) => {
        brushColor = e.target.value;
    });

    document.getElementById("canvasBgColor").addEventListener("input", (e) => {
        canvasBgColor = e.target.value;
        canvasBgImage = null;
        addToUndoStack();
        redrawCanvas();
    });

    document.getElementById("clearCanvas").addEventListener("click", () => {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        drawingStack.length = 0;
        undoStack.length = 0;
        redoStack.length = 0;
        canvasBgColor = "#ffffff";
        canvasBgImage = null;
        redrawCanvas();
        updateUndoRedoButtons();
    });

    document.getElementById("downloadCanvas").addEventListener("click", () => {
        const link = document.createElement("a");
        link.download = 'drawing.png';
        link.href = canvas.toDataURL();
        link.click();
    });

    document.getElementById("uploadImage").addEventListener("click", () => {
        document.getElementById("uploadImageFile").click();
    });

    document.getElementById("uploadImageFile").addEventListener("change", (e) => {
        const file = e.target.files[0];
        const reader = new FileReader();
        reader.onload = function(event) {
            canvasBgImage = event.target.result;
            addToUndoStack();
            redrawCanvas();
        }
        reader.readAsDataURL(file);
    });
    document.getElementById("sidebarToggle").addEventListener("click", function() {
            document.getElementById("sideNav").classList.toggle("open");
            document.getElementById("mainContent").classList.toggle("sidebar-open");
        });

    canvas.addEventListener("mousedown", startPosition);
    canvas.addEventListener("mouseup", endPosition);
    canvas.addEventListener("mousemove", draw);

    document.getElementById("undo").addEventListener("click", () => {
        if (undoStack.length > 0) {
            redoStack.push({
                drawingStack: JSON.parse(JSON.stringify(drawingStack)),
                canvasBgColor: canvasBgColor,
                canvasBgImage: canvasBgImage
            });
            const lastState = undoStack.pop();
            drawingStack.length = 0;
            drawingStack.push(...lastState.drawingStack);
            canvasBgColor = lastState.canvasBgColor;
            canvasBgImage = lastState.canvasBgImage;
            redrawCanvas();
        }
        updateUndoRedoButtons();
    });

    document.getElementById("redo").addEventListener("click", () => {
        if (redoStack.length > 0) {
            undoStack.push({
                drawingStack: JSON.parse(JSON.stringify(drawingStack)),
                canvasBgColor: canvasBgColor,
                canvasBgImage: canvasBgImage
            });
            const lastState = redoStack.pop();
            drawingStack.length = 0;
            drawingStack.push(...lastState.drawingStack);
            canvasBgColor = lastState.canvasBgColor;
            canvasBgImage = lastState.canvasBgImage;
            redrawCanvas();
        }
        updateUndoRedoButtons();
    });

    updateUndoRedoButtons(); 
</script>
</body>
</html>
